#!/bin/bash

clear
# Colors
y='\e[1;33m' # Yellow
g='\e[1;32m' # Green
b='\e[1;34m' # Blue
r='\e[1;31m' # Red
c='\e[0m'    # Reset

# System Info
HOSTNAME=$(hostname)
IPV4=$(curl -s ipv4.icanhazip.com)
DOMAIN=$(cat /etc/xray/domain 2>/dev/null || echo "Not set")
ISP=$(curl -s ipinfo.io/org | cut -d " " -f2-)
RAM_TOTAL=$(free -m | awk 'NR==2 {print $2}')
RAM_USED=$(free -m | awk 'NR==2 {print $3}')
CPU_LOAD=$(top -bn1 | grep "load average" | awk '{print $12}' | sed 's/,//')
CORES=$(nproc)
OS=$(lsb_release -d | cut -f2-)
DATE=$(date +%d/%m/%Y)
TIME=$(date +%T)

# Header
echo -e "${g}╔════════════════════════════════════╗"
echo -e "║      🛡️  SCRIPT RG-AIO by RG        ║"
echo -e "╚════════════════════════════════════╝${c}"
echo -e "${b}┌──────────────── SYSTEM INFO ──────────────┐${c}"
echo -e "${y} Hostname     : $HOSTNAME"
echo -e " Public IP    : $IPV4"
echo -e " Domain       : $DOMAIN"
echo -e " ISP          : $ISP"
echo -e " Total RAM    : $RAM_TOTAL MB"
echo -e " Used RAM     : $RAM_USED MB"
echo -e " CPU Cores    : $CORES"
echo -e " Load Average : $CPU_LOAD"
echo -e " OS           : $OS"
echo -e " Date         : $DATE"
echo -e " Time         : $TIME${c}"
echo -e "${b}└────────────────────────────────────────────┘${c}"

# Status Section (optional static for now)
echo -e "${g} SSH       : ON  ${c}|${g}  Dropbear : ON  ${c}|${g} SSH-WS : ON ${c}"
echo -e "${g} NGINX     : ON  ${c}|${g}  STUNNEL  : ON  ${c}|${g} XRAY   : ON ${c}"
echo ""

# Menu
echo -e "${b}┌────────────── INFO MENU ───────────────┐${c}"
echo -e "${y} [01] SSH / WebSocket"
echo -e " [02] VMESS"
echo -e " [03] DOMAIN"
echo -e " [04] REBOOT VPS"
echo -e " [05] INFO PORT"
echo -e " [06] BACKUP"
echo -e " [07] RAM & CPU USAGE"
echo -e " [08] SYSTEM INFO"
echo -e " [09] MENU SYSTEM"
echo -e " [10] EXIT${c}"
echo -e "${b}└─────────────────────────────────────────┘${c}"
echo -ne "${y}Select menu ➤ ${c}"; read opt

# Handle input (basic for now)
case $opt in
    1) echo "Opening SSH/WS menu..." ;;
    2) echo "Opening VMESS menu..." ;;
    3) echo "Domain setup coming soon..." ;;
    4) reboot ;;
    5) netstat -tuln ;;
    6) echo "Backup system loading..." ;;
    7) top ;;
    8) neofetch ;;
    9) bash /usr/bin/menu ;;
    10) exit ;;
    *) echo "Invalid input. Try again." ;;
esac
